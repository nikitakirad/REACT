{"ast":null,"code":"var _jsxFileName = \"/home/nikki/Desktop/React-Assignment/blog-assignment/src/containers/Blog/Blog.js\";\nimport React, { Component } from 'react';\nimport Newpost from '../../components/Newpost/Newpost';\nimport axios from 'axios';\nimport { connect } from 'react-redux';\nimport Fullpost from '../../components/Fullpost/Fullpost';\nimport { Menu, Segment, Button, Message, Container } from 'semantic-ui-react';\nimport { Link, withRouter } from 'react-router-dom';\n\nclass blog extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      post: {\n        title: '',\n        content: '',\n        userId: ''\n      },\n      fetchedposts: [],\n      errorMessage: 'null'\n    };\n\n    this.serversidedata = () => {\n      const queryParams = '?auth=' + this.props.token + '&orderBy=\"userId\"&equalTo=\"' + this.props.userid + '\"';\n      console.log(queryParams);\n      axios.get('https://blog-app-e7a85.firebaseio.com/posts' + queryParams).then(res => {\n        const fetchedOrders = [];\n        console.log(res.data);\n\n        for (let key in res.data) {\n          fetchedOrders.push({ ...res.data[key],\n            id: key\n          });\n          this.setState({\n            fetchedposts: fetchedOrders\n          });\n          console.log(fetchedOrders);\n          console.log(this.state.fetchedposts);\n        }\n      }).catch(err => {\n        console.log(err.res.data);\n        this.setState({\n          errorMessage: err.res.data.error\n        });\n      });\n    };\n\n    this.inputHandler = event => {\n      console.log('hi'); //console.log(this.state.fetchedposts);\n\n      let updatedstate = { ...this.state.post\n      };\n      updatedstate[event.target.name] = event.target.value;\n      this.setState({\n        post: updatedstate\n      });\n      console.log(this.state.post);\n    };\n\n    this.saveddata = () => {\n      if (this.props.token) {\n        const postdata = { ...this.state.post,\n          userId: this.props.userid\n        };\n        console.log(this.props.token);\n        axios.post('https://blog-app-e7a85.firebaseio.com/posts.json?auth=' + this.props.token, postdata).then(response => {\n          console.log(response.data);\n          this.setState(prevstate => prevstate.fetchedposts.push(postdata));\n        }).catch(err => {\n          console.log(err.response.data);\n          this.setState({\n            errorMessage: err.response.data.error\n          });\n        });\n      } else {\n        this.props.history.push('/login');\n      }\n    };\n  }\n\n  componentDidMount() {\n    if (this.props.token) {\n      this.serversidedata();\n    }\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Segment, {\n      inverted: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Menu, {\n      inverted: true,\n      pointing: true,\n      secondary: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 13\n      }\n    }, this.props.token ?\n    /*#__PURE__*/\n    // (<Menu.Item position=\"left\">\n    //     <Sidebar />\n    // </Menu.Item>)\n    React.createElement(Menu.Item, {\n      position: \"right\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 14\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      class: \"ui button\",\n      color: \"grey\",\n      as: Link,\n      to: \"/\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 17\n      }\n    }, \"Posts\"), /*#__PURE__*/React.createElement(Button, {\n      class: \"ui button\",\n      color: \"grey\",\n      as: Link,\n      to: \"/logout\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 17\n      }\n    }, \"Log out\")) : /*#__PURE__*/React.createElement(Menu.Item, {\n      position: \"right\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 18\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      class: \"ui button\",\n      color: \"grey\",\n      as: Link,\n      to: \"/login\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 21\n      }\n    }, \"Log In\")))), this.state.errorMessage ? /*#__PURE__*/React.createElement(Segment, {\n      textAlign: \"center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Newpost, {\n      oninputHandler: event => this.inputHandler(event),\n      onsaveddata: this.saveddata,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 43\n      }\n    }), /*#__PURE__*/React.createElement(Fullpost, {\n      posts: this.state.fetchedposts,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 13\n      }\n    })) : /*#__PURE__*/React.createElement(Message, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 24\n      }\n    }, /*#__PURE__*/React.createElement(Container, {\n      textAlign: \"center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 33\n      }\n    }, this.state.errorMessage)));\n  }\n\n}\n\nconst mapStateToProps = state => {\n  console.log(state);\n  return {\n    token: state.token,\n    userid: state.userId\n  };\n};\n\nexport default withRouter(connect(mapStateToProps)(blog));","map":{"version":3,"sources":["/home/nikki/Desktop/React-Assignment/blog-assignment/src/containers/Blog/Blog.js"],"names":["React","Component","Newpost","axios","connect","Fullpost","Menu","Segment","Button","Message","Container","Link","withRouter","blog","state","post","title","content","userId","fetchedposts","errorMessage","serversidedata","queryParams","props","token","userid","console","log","get","then","res","fetchedOrders","data","key","push","id","setState","catch","err","error","inputHandler","event","updatedstate","target","name","value","saveddata","postdata","response","prevstate","history","componentDidMount","render","mapStateToProps"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,OAAP,MAAoB,kCAApB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,OAAOC,QAAP,MAAqB,oCAArB;AACA,SAAQC,IAAR,EAAaC,OAAb,EAAqBC,MAArB,EAA6BC,OAA7B,EAAsCC,SAAtC,QAAsD,mBAAtD;AACA,SAAQC,IAAR,EAAaC,UAAb,QAA8B,kBAA9B;;AACA,MAAMC,IAAN,SAAmBZ,SAAnB,CAA4B;AAAA;AAAA;AAAA,SACxBa,KADwB,GAClB;AACFC,MAAAA,IAAI,EAAC;AACDC,QAAAA,KAAK,EAAC,EADL;AAEDC,QAAAA,OAAO,EAAC,EAFP;AAGDC,QAAAA,MAAM,EAAC;AAHN,OADH;AAMFC,MAAAA,YAAY,EAAC,EANX;AAOFC,MAAAA,YAAY,EAAC;AAPX,KADkB;;AAAA,SAcxBC,cAdwB,GAcT,MAAI;AACf,YAAMC,WAAW,GAAG,WAAW,KAAKC,KAAL,CAAWC,KAAtB,GAA8B,6BAA9B,GAA8D,KAAKD,KAAL,CAAWE,MAAzE,GAAkF,GAAtG;AACAC,MAAAA,OAAO,CAACC,GAAR,CAAYL,WAAZ;AACAnB,MAAAA,KAAK,CAACyB,GAAN,CAAU,gDAA+CN,WAAzD,EACCO,IADD,CACOC,GAAG,IAAI;AACV,cAAMC,aAAa,GAAG,EAAtB;AACAL,QAAAA,OAAO,CAACC,GAAR,CAAYG,GAAG,CAACE,IAAhB;;AACA,aAAM,IAAIC,GAAV,IAAiBH,GAAG,CAACE,IAArB,EAA4B;AACxBD,UAAAA,aAAa,CAACG,IAAd,CAAoB,EAChB,GAAGJ,GAAG,CAACE,IAAJ,CAASC,GAAT,CADa;AAEhBE,YAAAA,EAAE,EAAEF;AAFY,WAApB;AAIA,eAAKG,QAAL,CAAc;AAACjB,YAAAA,YAAY,EAACY;AAAd,WAAd;AACAL,UAAAA,OAAO,CAACC,GAAR,CAAYI,aAAZ;AACAL,UAAAA,OAAO,CAACC,GAAR,CAAY,KAAKb,KAAL,CAAWK,YAAvB;AACH;AAAC,OAZN,EAaKkB,KAbL,CAaWC,GAAG,IAAE;AACRZ,QAAAA,OAAO,CAACC,GAAR,CAAYW,GAAG,CAACR,GAAJ,CAAQE,IAApB;AAEA,aAAKI,QAAL,CAAc;AAAChB,UAAAA,YAAY,EAACkB,GAAG,CAACR,GAAJ,CAAQE,IAAR,CAAaO;AAA3B,SAAd;AACH,OAjBL;AAkBH,KAnCuB;;AAAA,SAqCxBC,YArCwB,GAqCVC,KAAD,IAAS;AAClBf,MAAAA,OAAO,CAACC,GAAR,CAAY,IAAZ,EADkB,CAElB;;AACA,UAAIe,YAAY,GAAC,EAAC,GAAG,KAAK5B,KAAL,CAAWC;AAAf,OAAjB;AACA2B,MAAAA,YAAY,CAACD,KAAK,CAACE,MAAN,CAAaC,IAAd,CAAZ,GAAgCH,KAAK,CAACE,MAAN,CAAaE,KAA7C;AACA,WAAKT,QAAL,CAAc;AAACrB,QAAAA,IAAI,EAAC2B;AAAN,OAAd;AACAhB,MAAAA,OAAO,CAACC,GAAR,CAAY,KAAKb,KAAL,CAAWC,IAAvB;AACH,KA5CuB;;AAAA,SA6CxB+B,SA7CwB,GA6Cd,MAAI;AACV,UAAG,KAAKvB,KAAL,CAAWC,KAAd,EAAoB;AACpB,cAAMuB,QAAQ,GAAC,EAAC,GAAG,KAAKjC,KAAL,CAAWC,IAAf;AAAoBG,UAAAA,MAAM,EAAC,KAAKK,KAAL,CAAWE;AAAtC,SAAf;AACAC,QAAAA,OAAO,CAACC,GAAR,CAAY,KAAKJ,KAAL,CAAWC,KAAvB;AACArB,QAAAA,KAAK,CAACY,IAAN,CAAW,2DAA2D,KAAKQ,KAAL,CAAWC,KAAjF,EAAuFuB,QAAvF,EACClB,IADD,CACOmB,QAAQ,IAAI;AACftB,UAAAA,OAAO,CAACC,GAAR,CAAaqB,QAAQ,CAAChB,IAAtB;AACA,eAAKI,QAAL,CAAca,SAAS,IACnBA,SAAS,CAAC9B,YAAV,CAAuBe,IAAvB,CAA4Ba,QAA5B,CADJ;AAGH,SAND,EAMIV,KANJ,CAMUC,GAAG,IAAE;AACXZ,UAAAA,OAAO,CAACC,GAAR,CAAYW,GAAG,CAACU,QAAJ,CAAahB,IAAzB;AACA,eAAKI,QAAL,CAAc;AAAChB,YAAAA,YAAY,EAACkB,GAAG,CAACU,QAAJ,CAAahB,IAAb,CAAkBO;AAAhC,WAAd;AACH,SATD;AASI,OAZJ,MAaI;AACA,aAAKhB,KAAL,CAAW2B,OAAX,CAAmBhB,IAAnB,CAAwB,QAAxB;AACH;AACJ,KA9DuB;AAAA;;AAUxBiB,EAAAA,iBAAiB,GAAE;AACf,QAAG,KAAK5B,KAAL,CAAWC,KAAd,EAAoB;AACpB,WAAKH,cAAL;AAAuB;AAC1B;;AAkDD+B,EAAAA,MAAM,GAAE;AACR,wBACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI,oBAAC,OAAD;AAAS,MAAA,QAAQ,MAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACA,oBAAC,IAAD;AAAM,MAAA,QAAQ,MAAd;AAAe,MAAA,QAAQ,MAAvB;AAAwB,MAAA,SAAS,MAAjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACC,KAAK7B,KAAL,CAAWC,KAAX;AAAA;AAED;AACA;AACA;AACC,wBAAC,IAAD,CAAM,IAAN;AAAW,MAAA,QAAQ,EAAC,OAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAEG,oBAAC,MAAD;AAAQ,MAAA,KAAK,EAAC,WAAd;AAA0B,MAAA,KAAK,EAAC,MAAhC;AAAuC,MAAA,EAAE,EAAEb,IAA3C;AAAiD,MAAA,EAAE,EAAE,GAArD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAFH,eAGG,oBAAC,MAAD;AAAQ,MAAA,KAAK,EAAC,WAAd;AAA0B,MAAA,KAAK,EAAC,MAAhC;AAAuC,MAAA,EAAE,EAAEA,IAA3C;AAAiD,MAAA,EAAE,EAAE,SAArD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBAHH,CALA,gBAWI,oBAAC,IAAD,CAAM,IAAN;AAAW,MAAA,QAAQ,EAAC,OAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACG,oBAAC,MAAD;AAAQ,MAAA,KAAK,EAAC,WAAd;AAA0B,MAAA,KAAK,EAAC,MAAhC;AAAuC,MAAA,EAAE,EAAEA,IAA3C;AAAiD,MAAA,EAAE,EAAE,QAArD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADH,CAZL,CADA,CADJ,EAuBK,KAAKG,KAAL,CAAWM,YAAX,gBACD,oBAAC,OAAD;AAAS,MAAA,SAAS,EAAC,QAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAEA,oBAAC,OAAD;AAAS,MAAA,cAAc,EAAGqB,KAAD,IAAS,KAAKD,YAAL,CAAkBC,KAAlB,CAAlC;AACA,MAAA,WAAW,EAAE,KAAKK,SADlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFA,eAG8B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAH9B,eAIA,oBAAC,QAAD;AAAU,MAAA,KAAK,EAAE,KAAKhC,KAAL,CAAWK,YAA5B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAJA,CADC,gBAMU,oBAAC,OAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAAS,oBAAC,SAAD;AAAW,MAAA,SAAS,EAAC,QAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAA+B,KAAKL,KAAL,CAAWM,YAA1C,CAAT,CA7Bf,CADJ;AAiCH;;AAjG2B;;AAmG5B,MAAMiC,eAAe,GAAEvC,KAAK,IAAG;AAC3BY,EAAAA,OAAO,CAACC,GAAR,CAAYb,KAAZ;AACA,SAAM;AACFU,IAAAA,KAAK,EAACV,KAAK,CAACU,KADV;AAEFC,IAAAA,MAAM,EAACX,KAAK,CAACI;AAFX,GAAN;AAIH,CAND;;AAOA,eAAeN,UAAU,CAACR,OAAO,CAACiD,eAAD,CAAP,CAAyBxC,IAAzB,CAAD,CAAzB","sourcesContent":["import React, { Component } from 'react';\nimport Newpost from '../../components/Newpost/Newpost';\nimport axios from 'axios';\nimport { connect } from 'react-redux';\nimport Fullpost from '../../components/Fullpost/Fullpost';\nimport {Menu,Segment,Button, Message, Container} from 'semantic-ui-react';\nimport {Link,withRouter} from 'react-router-dom';\nclass blog extends Component{\n    state={\n        post:{\n            title:'',\n            content:'',\n            userId:''\n        },\n        fetchedposts:[],\n        errorMessage:'null'\n    }\n    componentDidMount(){\n        if(this.props.token){\n        this.serversidedata();}\n    }\n    serversidedata=()=>{\n        const queryParams = '?auth=' + this.props.token + '&orderBy=\"userId\"&equalTo=\"' + this.props.userid + '\"';\n        console.log(queryParams);\n        axios.get('https://blog-app-e7a85.firebaseio.com/posts' +queryParams)\n        .then( res => {\n            const fetchedOrders = [];\n            console.log(res.data);\n            for ( let key in res.data ) {\n                fetchedOrders.push( {\n                    ...res.data[key],\n                    id: key\n                } );\n                this.setState({fetchedposts:fetchedOrders});\n                console.log(fetchedOrders);\n                console.log(this.state.fetchedposts);\n            }})\n            .catch(err=>{\n                console.log(err.res.data);\n\n                this.setState({errorMessage:err.res.data.error})\n            });\n    }\n     \n    inputHandler=(event)=>{\n        console.log('hi');\n        //console.log(this.state.fetchedposts);\n        let updatedstate={...this.state.post};\n        updatedstate[event.target.name]=event.target.value;\n        this.setState({post:updatedstate})\n        console.log(this.state.post);\n    }\n    saveddata=()=>{\n        if(this.props.token){\n        const postdata={...this.state.post,userId:this.props.userid};\n        console.log(this.props.token);\n        axios.post('https://blog-app-e7a85.firebaseio.com/posts.json?auth=' + this.props.token,postdata)\n        .then( response => {\n            console.log( response.data );\n            this.setState(prevstate=>(\n                prevstate.fetchedposts.push(postdata)\n            ));\n        } ).catch(err=>{\n            console.log(err.response.data);\n            this.setState({errorMessage:err.response.data.error})\n        });}\n        else{\n            this.props.history.push('/login');\n        }\n    }\n    render(){\n    return(\n        <div>\n            <Segment inverted>\n            <Menu inverted pointing secondary>\n            {this.props.token ?\n            \n            // (<Menu.Item position=\"left\">\n            //     <Sidebar />\n            // </Menu.Item>)\n            (<Menu.Item position=\"right\">\n           \n                <Button class=\"ui button\" color=\"grey\" as={Link} to ='/'>Posts</Button>\n                <Button class=\"ui button\" color=\"grey\" as={Link} to ='/logout'>Log out</Button>\n        \n            </Menu.Item>) :\n                (<Menu.Item position=\"right\">\n                    <Button class=\"ui button\" color=\"grey\" as={Link} to ='/login'>Log In</Button>\n      \n                </Menu.Item>)\n            \n            }\n\n            </Menu>\n            </Segment>\n            {this.state.errorMessage?\n            <Segment textAlign=\"center\">\n            \n            <Newpost oninputHandler={(event)=>this.inputHandler(event)}\n            onsaveddata={this.saveddata}/><br></br>\n            <Fullpost posts={this.state.fetchedposts} />\n            </Segment>:<Message><Container textAlign=\"center\">{this.state.errorMessage}</Container></Message>}\n        </div>\n    );\n}\n}\nconst mapStateToProps= state =>{\n    console.log(state);\n    return{\n        token:state.token,\n        userid:state.userId\n    }\n}\nexport default withRouter(connect(mapStateToProps)(blog));"]},"metadata":{},"sourceType":"module"}