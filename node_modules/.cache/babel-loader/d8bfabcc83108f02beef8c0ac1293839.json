{"ast":null,"code":"var _jsxFileName = \"/home/nikki/Desktop/React-Assignment/blog-assignment/src/containers/Blog/Blog.js\";\nimport React, { Component } from 'react';\nimport Newpost from '../../components/Newpost/Newpost';\nimport axios from 'axios';\nimport { connect } from 'react-redux';\nimport Fullpost from '../../components/Fullpost/Fullpost';\nimport { Card, Menu, Segment, Button } from 'semantic-ui-react';\nimport { Link } from 'react-router-dom';\n\nclass blog extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      post: {\n        title: '',\n        content: ''\n      },\n      fetchedposts: [],\n      s: false\n    };\n\n    this.inputHandler = event => {\n      console.log('hi'); //console.log(this.state.fetchedposts);\n\n      let updatedstate = { ...this.state.post\n      };\n      updatedstate[event.target.name] = event.target.value;\n      this.setState({\n        post: updatedstate\n      });\n      console.log(this.state.post);\n    };\n\n    this.saveddata = () => {\n      const postdata = { ...this.state.post,\n        userId: this.props.userid\n      };\n      console.log(this.props.token);\n      axios.post('https://blog-app-e7a85.firebaseio.com/posts.json?auth=' + this.props.token, postdata).then(response => {\n        console.log(response.data);\n        this.setState({\n          s: true\n        });\n      });\n    };\n  }\n\n  componentDidMount() {\n    const queryParams = '?auth=' + this.props.token + '&orderBy=\"userId\"&equalTo=\"' + this.props.userid + '\"';\n    console.log(queryParams);\n    axios.get('https://blog-app-e7a85.firebaseio.com/posts.json' + queryParams).then(res => {\n      const fetchedOrders = [];\n      console.log(res.data);\n\n      for (let key in res.data) {\n        fetchedOrders.push({ ...res.data[key],\n          id: key\n        });\n        this.setState({\n          fetchedposts: fetchedOrders\n        });\n        console.log(fetchedOrders);\n        console.log(this.state.fetchedposts);\n      }\n    });\n  }\n\n  componentDidUpdate() {\n    if (s) {\n      const queryParams = '?auth=' + this.props.token + '&orderBy=\"userId\"&equalTo=\"' + this.props.userid + '\"';\n      console.log(queryParams);\n      axios.get('https://blog-app-e7a85.firebaseio.com/posts.json' + queryParams).then(res => {\n        const fetchedOrders = [];\n        console.log(res.data);\n\n        for (let key in res.data) {\n          fetchedOrders.push({ ...res.data[key],\n            id: key\n          });\n          this.setState({\n            fetchedposts: fetchedOrders\n          });\n          console.log(fetchedOrders);\n          console.log(this.state.fetchedposts);\n        }\n      });\n    }\n  }\n\n  render() {\n    // let fullpost=<p>No posts yet</p>;\n    // if(this.state.fetchedposts.length>0){\n    // fullpost=this.state.fetchedposts.map(posts=>(\n    //     <Fullpost title={posts.title}\n    //     content={posts.content}/>\n    // ))}\n    // console.log(this.state.fetchedposts.length);\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Segment, {\n      inverted: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Menu, {\n      inverted: true,\n      pointing: true,\n      secondary: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 13\n      }\n    }, this.props.token ? /*#__PURE__*/React.createElement(Menu.Item, {\n      position: \"right\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 14\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      class: \"ui button\",\n      color: \"grey\",\n      as: Link,\n      to: \"/\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 17\n      }\n    }, \"Posts\"), /*#__PURE__*/React.createElement(Button, {\n      class: \"ui button\",\n      color: \"grey\",\n      as: Link,\n      to: \"/login\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 17\n      }\n    }, \"Log out\")) : /*#__PURE__*/React.createElement(Menu.Item, {\n      position: \"right\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 18\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      class: \"ui button\",\n      color: \"grey\",\n      as: Link,\n      to: \"/login\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 21\n      }\n    }, \"Log In\")))), /*#__PURE__*/React.createElement(Segment, {\n      textAlign: \"center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Newpost, {\n      oninputHandler: event => this.inputHandler(event),\n      onsaveddata: this.saveddata,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 43\n      }\n    }), /*#__PURE__*/React.createElement(Fullpost, {\n      posts: this.state.fetchedposts,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 13\n      }\n    })));\n  }\n\n}\n\nconst mapStateToProps = state => {\n  console.log(state);\n  return {\n    token: state.token,\n    userid: state.userId\n  };\n};\n\nexport default connect(mapStateToProps)(blog);","map":{"version":3,"sources":["/home/nikki/Desktop/React-Assignment/blog-assignment/src/containers/Blog/Blog.js"],"names":["React","Component","Newpost","axios","connect","Fullpost","Card","Menu","Segment","Button","Link","blog","state","post","title","content","fetchedposts","s","inputHandler","event","console","log","updatedstate","target","name","value","setState","saveddata","postdata","userId","props","userid","token","then","response","data","componentDidMount","queryParams","get","res","fetchedOrders","key","push","id","componentDidUpdate","render","mapStateToProps"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport Newpost from '../../components/Newpost/Newpost';\nimport axios from 'axios';\nimport { connect } from 'react-redux';\nimport Fullpost from '../../components/Fullpost/Fullpost';\nimport {Card,Menu,Segment,Button} from 'semantic-ui-react';\nimport {Link} from 'react-router-dom'\nclass blog extends Component{\n    state={\n        post:{\n            title:'',\n            content:''\n        },\n        fetchedposts:[],\n        s:false\n    }\n    componentDidMount(){\n        const queryParams = '?auth=' + this.props.token + '&orderBy=\"userId\"&equalTo=\"' + this.props.userid + '\"';\n        console.log(queryParams);\n        axios.get('https://blog-app-e7a85.firebaseio.com/posts.json' +queryParams)\n        .then( res => {\n            const fetchedOrders = [];\n            console.log(res.data);\n            for ( let key in res.data ) {\n                fetchedOrders.push( {\n                    ...res.data[key],\n                    id: key\n                } );\n                this.setState({fetchedposts:fetchedOrders});\n                console.log(fetchedOrders);\n                console.log(this.state.fetchedposts);\n            }});\n           \n        }\n    \n     componentDidUpdate(){\n            if(s){\n         const queryParams = '?auth=' + this.props.token + '&orderBy=\"userId\"&equalTo=\"' + this.props.userid + '\"';\n        console.log(queryParams);\n        axios.get('https://blog-app-e7a85.firebaseio.com/posts.json' +queryParams)\n        .then( res => {\n            const fetchedOrders = [];\n            console.log(res.data);\n            for ( let key in res.data ) {\n                 fetchedOrders.push( {\n                     ...res.data[key],\n                    id: key\n                 } );\n                 this.setState({fetchedposts:fetchedOrders});\n                 console.log(fetchedOrders);\n                 console.log(this.state.fetchedposts);\n            }});}\n     }\n    inputHandler=(event)=>{\n        console.log('hi');\n        //console.log(this.state.fetchedposts);\n        let updatedstate={...this.state.post};\n        updatedstate[event.target.name]=event.target.value;\n        this.setState({post:updatedstate})\n        console.log(this.state.post);\n    }\n    saveddata=()=>{\n        const postdata={...this.state.post,userId:this.props.userid};\n        console.log(this.props.token);\n        axios.post('https://blog-app-e7a85.firebaseio.com/posts.json?auth=' + this.props.token,postdata)\n        .then( response => {\n            console.log( response.data );\n            this.setState({s:true});\n        } );\n    }\n    render(){\n        // let fullpost=<p>No posts yet</p>;\n        // if(this.state.fetchedposts.length>0){\n        // fullpost=this.state.fetchedposts.map(posts=>(\n        //     <Fullpost title={posts.title}\n        //     content={posts.content}/>\n        // ))}\n        // console.log(this.state.fetchedposts.length);\n    return(\n        <div>\n            <Segment inverted>\n            <Menu inverted pointing secondary>\n            {this.props.token ?\n            (<Menu.Item position=\"right\">\n           \n                <Button class=\"ui button\" color=\"grey\" as={Link} to ='/'>Posts</Button>\n                <Button class=\"ui button\" color=\"grey\" as={Link} to ='/login'>Log out</Button>\n        \n            </Menu.Item>) :\n                (<Menu.Item position=\"right\">\n                    <Button class=\"ui button\" color=\"grey\" as={Link} to ='/login'>Log In</Button>\n      \n                </Menu.Item>)\n            }\n\n            </Menu>\n            </Segment>\n            <Segment textAlign=\"center\">\n            <Newpost oninputHandler={(event)=>this.inputHandler(event)}\n            onsaveddata={this.saveddata}/><br></br>\n            <Fullpost posts={this.state.fetchedposts} />\n            </Segment>\n        </div>\n    );\n}\n}\nconst mapStateToProps= state =>{\n    console.log(state);\n    return{\n        token:state.token,\n        userid:state.userId\n    }\n}\nexport default connect(mapStateToProps)(blog);"]},"metadata":{},"sourceType":"module"}